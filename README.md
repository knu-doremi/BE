# [Team 3] DoReMi SNS - Backend Server

> **사용자 취향 분석 기반 추천 시스템을 탑재한 SNS 백엔드 서버**
>
> 이미지 분석 AI와 콘텐츠 기반 필터링(Content-based Filtering)을 활용하여 사용자에게 최적화된 유저 및 게시물을 추천합니다.

---

## 💻 개발 환경 (Environment)

| 구분 | 상세 내용 | 비고 |
| :-- | :-- | :-- |
| **OS** | Windows | 개발 및 테스트 환경 |
| **Language** | Node.js | Runtime Environment |
| **Framework** | Express | Web Framework |
| **Database** | Oracle Database | PL/SQL, Sequence 사용 |
| **Port** | **3000** | Fixed (프론트엔드 연동) |

---

## 📡 기능 명세 및 핵심 로직 (Features & Core Logic)

### 1. USER (사용자 관리)
* **로그인 (Login)**: 등록된 아이디와 비밀번호를 검증하여 세션을 생성합니다.
* **회원가입 (Register)**: 아이디, 비밀번호, 이름, 성별, 생년월일을 입력받아 새로운 유저를 생성합니다.
* **아이디 중복확인 (Check ID)**: 회원가입 전, 데이터베이스 조회하여 중복된 아이디 여부를 판별합니다.
* **비밀번호 찾기 (Find Password)**: 가입 시 입력한 정보(아이디, 이름, 성별, 생년월일)가 모두 일치하는지 검증 후 비밀번호를 반환합니다.
* **유저 검색 (Search User)**: 와일드카드(`%`) 패턴 매칭을 사용하여 사용자가 입력한 키워드가 포함된 아이디를 검색합니다.
* **프로필 수정 (Update Profile)**: 로그인한 유저의 이름 및 비밀번호를 수정합니다.
* **★ 추천 유저 5명 조회 (User Recommendation Logic)**
    1.  **가중치 계산**: 각 라벨(관심사)에 대해 사용자가 '좋아요'를 누른 횟수를 기반으로 가중치를 산출합니다.
    2.  **유저 점수 계산**: 타 유저가 작성한 게시물 중 해당 라벨이 포함된 게시물을 분석, 유저별 가중치 합계를 계산합니다.
    3.  **필터링**: 이미 팔로우한 유저는 추천 대상에서 제외합니다.
    4.  **상위 추출**: 점수가 가장 높은 상위 5명의 유저를 선별하여 반환합니다.

### 2. POST (게시물 관리)
* **게시물 상세 조회 (Get Detail)**: `post_id`를 통해 게시물의 상세 내용, 작성자 정보, 댓글 등을 한 번에 조회합니다.
* **유저별 게시물 조회 (Get by User)**: `user_id`를 기준으로 해당 사용자가 작성한 모든 게시물을 조회합니다.
* **팔로잉 게시물 조회 (Get Following Feed)**: 현재 로그인한 유저가 팔로우하는 유저들의 게시물만 필터링하여 최신순으로 조회합니다.
* **게시물 생성 (Create)**: 이미지, 본문 내용, 해시태그 데이터를 받아 게시물을 생성 및 저장합니다.
* **게시물 삭제 (Delete)**: 작성자 본인임을 확인 후 게시물을 삭제합니다.
* **★ 추천 게시물 조회 (Post Recommendation Logic)**
    1.  **취향 분석**: 사용자가 '좋아요'를 누른 게시물의 라벨(예: "자연", "음식")에 가중치를 부여합니다.
    2.  **점수 산출**: 전체 게시물 중 해당 라벨을 포함하는 게시물을 찾아 가중치 합계를 계산합니다.
    3.  **순위 결정**: 점수가 높은 순서대로 정렬하며, 점수가 동일할 경우 최신 게시물을 우선합니다.
    4.  **필터링**: 사용자 본인이 작성한 게시물은 추천 목록에서 제외합니다.

### 3. LIKE (좋아요)
* **상태 확인 (Check Status)**: 유저와 게시물 ID를 매칭하여 현재 좋아요를 누른 상태인지 확인합니다.
* **좋아요 토글 (Toggle Like)**: 현재 상태에 따라 좋아요를 등록하거나 취소(삭제)합니다.
* **총 좋아요 수 집계 (Count Likes)**: 유저 프로필 표시를 위해, 해당 유저가 작성한 모든 게시물이 받은 좋아요의 총개수를 계산하여 반환합니다.

### 4. HASHTAG (해시태그)
* **해시태그 검색 (Search by Tag)**: 특정 해시태그가 포함된 게시물 리스트를 조회합니다.
* **해시태그 자동완성 (Auto-complete Logic)**
    1.  **부분 일치 검색**: 검색어 앞뒤에 와일드카드(`%`)를 적용하여 단어의 일부만 입력해도 연관 태그를 찾습니다. (예: "여행" → "제주여행", "여행일기")
    2.  **대소문자 무시**: "Travel", "travel", "TRAVEL"을 모두 동일한 키워드로 처리합니다.
    3.  **인기순 정렬**: 해당 해시태그가 사용된 게시물 수가 많은 순서대로 정렬하여 트렌드를 반영합니다.
* **태그 목록 조회 (List Tags)**: 특정 게시물에 등록된 모든 해시태그를 가져옵니다.

### 5. BOOKMARK (북마크)
* **북마크 확인 (Check Status)**: 현재 게시물이 북마크 리스트에 존재하는지 확인합니다.
* **북마크 가져오기 (Get List)**: 사용자가 저장한 게시물들을 모아서 조회합니다.
* **북마크 관리 (Add/Remove)**: 게시물을 내 보관함에 추가하거나 삭제합니다.

### 6. COMMENT (댓글)
* **댓글 조회 (List)**: 특정 게시물에 달린 댓글 목록을 불러옵니다.
* **댓글 작성 (Add)**: 게시물에 새로운 댓글을 등록합니다.
* **대댓글 작성 (Reply)**: 기존 댓글에 대한 답글(Depth 2)을 작성합니다.
* **댓글 삭제 (Delete)**: 작성자 본인의 댓글을 삭제합니다.

### 7. FOLLOW (팔로우)
* **관계 수 집계 (Count)**: 유저 프로필에 표시할 팔로워(Follower) 및 팔로잉(Following) 수를 계산하여 반환합니다.
* **팔로우/언팔로우 (Toggle)**: 상대방과의 팔로우 상태를 확인하여 관계를 맺거나 끊습니다.
* **팔로우 여부 확인 (Check Status)**: 현재 로그인한 유저가 특정 유저를 팔로우하고 있는지 상태(Boolean)를 반환합니다.
